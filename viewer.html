<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>3D Viewer</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      *{box-sizing:border-box;margin:0;padding:0}
      body{
        font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;
        background:#ffffff;
        color:#000;
        display:flex;
        align-items:center;
        justify-content:center;
        min-height:100vh;
        padding:48px;
      }
      .wrap{width:100%;max-width:1400px}
      header{
        display:flex;
        justify-content:space-between;
        align-items:flex-start;
        margin-bottom:32px;
        padding-bottom:24px;
        border-bottom:1px solid #e8e8e8;
      }
      h1{
        font-size:1.2rem;
        color:#000;
        font-weight:300;
        letter-spacing:1px;
      }
      .note{
        color:#666;
        font-size:0.8rem;
        letter-spacing:0.3px;
        margin-top:8px;
        line-height:1.6;
      }
      .note code{
        background:#f5f5f5;
        padding:2px 6px;
        font-size:0.75rem;
        color:#000;
      }

      model-viewer{
        width:100%;
        height:640px;
        background:#fafafa;
        outline:none;
        border:1px solid #e8e8e8;
      }

      .controls{
        margin-top:24px;
        display:flex;
        gap:1px;
        background:#e8e8e8;
        border:1px solid #e8e8e8;
      }
      .btn{
        background:#ffffff;
        border:0;
        color:#000;
        padding:16px 24px;
        text-decoration:none;
        flex:1;
        text-align:center;
        font-size:0.75rem;
        letter-spacing:1.5px;
        text-transform:uppercase;
        transition:background 0.2s ease;
      }
      .btn:hover{background:#fafafa}

      @media(max-width:768px){
        body{padding:24px}
        header{flex-direction:column;gap:12px}
        .controls{flex-direction:column}
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div>
          <h1>3D Model Viewer</h1>
          <div class="note">Place your exported GLB at <code>assets/models/mx5.glb</code> and poster at <code>assets/models/mx5-poster.jpg</code></div>
        </div>
        <div class="note">Demo model used if local file not found</div>
      </header>

      <model-viewer id="mv" src="assets/models/mx5.glb" alt="3D model" camera-controls auto-rotate environment-image="https://modelviewer.dev/shared-assets/environments/moon_1k.hdr" poster="assets/models/mx5-poster.jpg" ar ios-src="assets/models/mx5.usdz" exposure="1.0" loading="eager"></model-viewer>

      <div class="controls">
        <a class="btn" id="open-local" href="assets/models/mx5.glb" target="_blank">Open Local GLB</a>
        <a class="btn" id="open-sample" href="https://modelviewer.dev/shared-assets/models/Astronaut.glb" target="_blank">Open Sample GLB</a>
        <a class="btn" id="howto" href="tools/README-viewer.md" target="_blank">Documentation</a>
      </div>
    </div>

    <script>
      (async function(){
        const mv = document.getElementById('mv');
        const localUrl = 'assets/models/mx5.glb';
  const fallback = 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/CesiumMilkTruck/glTF-Binary/CesiumMilkTruck.glb';
        try{
          const r = await fetch(localUrl, {method:'HEAD'});
          if(!r.ok){
            mv.src = fallback;
            mv.poster = 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/CesiumMilkTruck/screenshot/screenshot.webp';
          }
        }catch(err){
          // probably file:// or blocked; fall back to sample
          mv.src = fallback;
          mv.poster = 'https://modelviewer.dev/shared-assets/models/Astronaut.webp';
        }
      })();
    </script>
  </body>
</html>
